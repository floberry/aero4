<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³µì£¼ì˜ ëŒë¦¼í˜ ë§ˆë²• ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Serif KR', serif;
            background: linear-gradient(135deg, #ffd1dc 0%, #ffb6d9 50%, #e6b5ff 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(219, 112, 147, 0.3);
            padding: 40px;
            max-width: 900px;
            width: 100%;
            border: 3px solid #ffb6d9;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h1 {
            text-align: center;
            color: #d946a6;
            font-size: 1.8em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(217, 70, 166, 0.2);
            white-space: nowrap;
        }
        
        h2 {
            color: #c026d3;
            font-size: 1.5em;
            margin: 30px 0 20px 0;
            text-align: center;
        }
        
        .simulation-area {
            background: linear-gradient(to bottom, #fff5f7, #fef0ff);
            border: 2px solid #f0abfc;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            position: relative;
            min-height: 300px;
        }
        
        .canvas-container {
            position: relative;
            width: 100%;
            height: 350px;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        canvas {
            border: 2px dashed #f0abfc;
            border-radius: 15px;
            background: white;
            max-width: 100%;
        }
        
        .controls {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 182, 217, 0.1);
            border-radius: 15px;
        }
        
        .control-group {
            margin: 15px 0;
        }
        
        label {
            display: block;
            color: #c026d3;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1em;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(to right, #f0abfc, #d946a6);
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #d946a6, #c026d3);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(217, 70, 166, 0.4);
        }
        
        .value-display {
            text-align: center;
            font-size: 1.2em;
            color: #c026d3;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .result-box {
            background: linear-gradient(135deg, #fef0ff, #fff5f7);
            border: 3px solid #d946a6;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .result-box h3 {
            color: #c026d3;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .result-value {
            font-size: 2em;
            color: #d946a6;
            font-weight: 600;
        }
        
        .quiz-section {
            margin-top: 40px;
        }
        
        .quiz-item {
            background: white;
            border: 2px solid #f0abfc;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .quiz-question {
            color: #831843;
            font-size: 1.15em;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .quiz-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .quiz-btn {
            padding: 12px 35px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Noto Serif KR', serif;
        }
        
        .quiz-btn.o {
            background: linear-gradient(135deg, #f0abfc, #d946a6);
            color: white;
        }
        
        .quiz-btn.x {
            background: linear-gradient(135deg, #cbd5e1, #94a3b8);
            color: white;
        }
        
        .quiz-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(217, 70, 166, 0.4);
        }
        
        .quiz-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.05em;
            line-height: 1.6;
            display: none;
        }
        
        .quiz-feedback.correct {
            background: #dcfce7;
            color: #166534;
            border: 2px solid #86efac;
            display: block;
        }
        
        .quiz-feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
            border: 2px solid #fca5a5;
            display: block;
        }
        
        .sparkle {
            position: absolute;
            pointer-events: none;
            animation: sparkleAnim 1s ease-out;
        }
        
        @keyframes sparkleAnim {
            0% {
                opacity: 1;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: scale(1.5) rotate(180deg);
            }
        }
        
        .confetti {
            position: fixed;
            pointer-events: none;
            animation: confettiFall 2s ease-out forwards;
        }
        
        @keyframes confettiFall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        .celebration {
            text-align: center;
            padding: 40px;
        }
        
        .princess-icon {
            font-size: 120px;
            margin: 30px 0;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .celebration h2 {
            color: #d946a6;
            font-size: 2.5em;
            margin: 20px 0;
        }
        
        .concept-summary {
            background: linear-gradient(to bottom, #fff5f7, #fef0ff);
            border: 3px solid #f0abfc;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
        }
        
        .concept-summary h3 {
            color: #c026d3;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .concept-item {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #d946a6;
        }
        
        .concept-item strong {
            color: #c026d3;
        }
        
        .btn-back {
            display: block;
            margin: 30px auto;
            padding: 15px 40px;
            background: linear-gradient(135deg, #f0abfc, #d946a6);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Noto Serif KR', serif;
        }
        
        .btn-back:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(217, 70, 166, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Page 1: Simulation and Quiz -->
        <div id="page1" class="page active">
            <h1>âœ¨ ê³µì£¼ì˜ ëŒë¦¼í˜ ë§ˆë²• ì‹œë®¬ë ˆì´ì…˜ âœ¨</h1>
            
            <div class="simulation-area">
                <h2>ğŸª„ ë§ˆë²• ìš”ìˆ ë´‰ ì‹œë®¬ë ˆì´ì…˜</h2>
                <div class="canvas-container">
                    <canvas id="canvas" width="700" height="350"></canvas>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <label>â­ ìš”ìˆ ë´‰ì˜ ê¸¸ì´ (ì¡°ì‘ë³€ì¸)</label>
                        <input type="range" id="lengthSlider" min="10" max="40" value="20" step="1">
                        <div class="value-display" id="lengthValue">20 cm</div>
                    </div>
                    <div class="control-group">
                        <label>ğŸ”® ìš”ìˆ ë´‰ì˜ ê°ë„ (ì¡°ì‘ë³€ì¸)</label>
                        <input type="range" id="angleSlider" min="-45" max="45" value="0" step="5">
                        <div class="value-display" id="angleValue">0Â°</div>
                    </div>
                </div>
                
                <div class="result-box">
                    <h3>ğŸ’« ë³¼íŠ¸ì— ì‘ìš©í•˜ëŠ” ëŒë¦¼í˜</h3>
                    <div class="result-value" id="torqueResult">1.73 NÂ·m</div>
                </div>
            </div>
            
            <div class="quiz-section">
                <h2>ğŸŒŸ ê°œë… í™•ì¸ í€´ì¦ˆ</h2>
                
                <div class="quiz-item">
                    <div class="quiz-question">Q1. ëŒë¦¼í˜ì˜ í¬ê¸°ëŠ” í˜ì˜ í¬ê¸°ì™€ íšŒì „ì¶•ìœ¼ë¡œë¶€í„°ì˜ ê±°ë¦¬(íŒ”ê¸¸ì´)ì˜ ê³±ìœ¼ë¡œ ê³„ì‚°ëœë‹¤.</div>
                    <div class="quiz-buttons">
                        <button class="quiz-btn o" onclick="checkAnswer(1, true)">O</button>
                        <button class="quiz-btn x" onclick="checkAnswer(1, false)">X</button>
                    </div>
                    <div class="quiz-feedback" id="feedback1"></div>
                </div>
                
                <div class="quiz-item">
                    <div class="quiz-question">Q2. ìš”ìˆ ë´‰ì˜ ê¸¸ì´ê°€ 2ë°°ë¡œ ëŠ˜ì–´ë‚˜ë©´ ê°™ì€ í˜ìœ¼ë¡œ ë§Œë“œëŠ” ëŒë¦¼í˜ë„ 2ë°°ê°€ ëœë‹¤.</div>
                    <div class="quiz-buttons">
                        <button class="quiz-btn o" onclick="checkAnswer(2, true)">O</button>
                        <button class="quiz-btn x" onclick="checkAnswer(2, false)">X</button>
                    </div>
                    <div class="quiz-feedback" id="feedback2"></div>
                </div>
                
                <div class="quiz-item">
                    <div class="quiz-question">Q3. í˜ì´ íšŒì „ì¶•ìœ¼ë¡œë¶€í„° ìˆ˜ì§ ë°©í–¥ìœ¼ë¡œ ì‘ìš©í•  ë•Œ ëŒë¦¼í˜ì´ ìµœëŒ€ê°€ ëœë‹¤.</div>
                    <div class="quiz-buttons">
                        <button class="quiz-btn o" onclick="checkAnswer(3, true)">O</button>
                        <button class="quiz-btn x" onclick="checkAnswer(3, false)">X</button>
                    </div>
                    <div class="quiz-feedback" id="feedback3"></div>
                </div>
            </div>
        </div>
        
        <!-- Page 2: Celebration -->
        <div id="page2" class="page">
            <div class="celebration">
                <div class="princess-icon">ğŸ‘¸</div>
                <h2>ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰</h2>
                <p style="font-size: 1.3em; color: #831843; margin: 20px 0;">ê³µì£¼ë‹˜, ëª¨ë“  ë¬¸ì œë¥¼ ì •ë‹µìœ¼ë¡œ ë§ì¶”ì…¨ì–´ìš”!</p>
                
                <div class="concept-summary">
                    <h3>âœ¨ ëŒë¦¼í˜ ê°œë… ì •ë¦¬ âœ¨</h3>
                    
                    <div class="concept-item">
                        <strong>1. ëŒë¦¼í˜ì˜ ì •ì˜</strong><br>
                        ëŒë¦¼í˜(Ï„)ì€ ë¬¼ì²´ë¥¼ íšŒì „ì‹œí‚¤ëŠ” íš¨ê³¼ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¬¼ë¦¬ëŸ‰ì…ë‹ˆë‹¤. íšŒì „ì¶•ì„ ì¤‘ì‹¬ìœ¼ë¡œ ë¬¼ì²´ë¥¼ ëŒë¦¬ë ¤ëŠ” í˜ì˜ íš¨ê³¼ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
                    </div>
                    
                    <div class="concept-item">
                        <strong>2. ëŒë¦¼í˜ì˜ ê³„ì‚°</strong><br>
                        ëŒë¦¼í˜ Ï„ = r Ã— F Ã— sin Î¸<br>
                        â€¢ r: íšŒì „ì¶•ìœ¼ë¡œë¶€í„°ì˜ ê±°ë¦¬ (íŒ”ê¸¸ì´)<br>
                        â€¢ F: ê°€í•´ì§„ í˜ì˜ í¬ê¸°<br>
                        â€¢ Î¸: íŒ”ê¸¸ì´ì™€ í˜ì´ ì´ë£¨ëŠ” ê°ë„<br>
                        â€¢ í˜ì´ ìˆ˜ì§ìœ¼ë¡œ ì‘ìš©í•  ë•Œ (Î¸=90Â°) ëŒë¦¼í˜ì´ ìµœëŒ€ê°€ ë©ë‹ˆë‹¤.
                    </div>
                    
                    <div class="concept-item">
                        <strong>3. ë¬¸ì œ í•´ê²°</strong><br>
                        ì›ë˜ ë¬¸ì œ: r = 0.2 m, F = 10 N, Î¸ = 30Â°<br>
                        Ï„ = 0.2 Ã— 10 Ã— sin(30Â°) = 0.2 Ã— 10 Ã— 0.5 = 1 NÂ·m<br>
                        í•˜ì§€ë§Œ í˜ì˜ ìˆ˜ì§ ì„±ë¶„ì„ ê³ ë ¤í•˜ë©´:<br>
                        Ï„ = 0.2 Ã— 10 Ã— cos(30Â°) = 0.2 Ã— 10 Ã— (âˆš3/2) â‰ˆ 1.73 NÂ·m
                    </div>
                    
                    <div class="concept-item">
                        <strong>4. ì‹¤ìƒí™œ ì‘ìš©</strong><br>
                        â€¢ ê¸´ ë Œì¹˜ê°€ ì§§ì€ ë Œì¹˜ë³´ë‹¤ ë³¼íŠ¸ë¥¼ ì‰½ê²Œ ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤<br>
                        â€¢ ë¬¸ì†ì¡ì´ëŠ” íšŒì „ì¶•(ê²½ì²©)ì—ì„œ ë¨¼ ê³³ì— ìœ„ì¹˜í•©ë‹ˆë‹¤<br>
                        â€¢ ì‹œì†ŒëŠ” ëŒë¦¼í˜ì˜ í‰í˜• ì›ë¦¬ë¥¼ ì´ìš©í•©ë‹ˆë‹¤
                    </div>
                </div>
                
                <button class="btn-back" onclick="goToPage(1)">ğŸª„ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
            </div>
        </div>
    </div>
    
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const lengthSlider = document.getElementById('lengthSlider');
        const lengthValue = document.getElementById('lengthValue');
        const angleSlider = document.getElementById('angleSlider');
        const angleValue = document.getElementById('angleValue');
        const torqueResult = document.getElementById('torqueResult');
        
        let quizAnswers = [false, false, false];
        const correctAnswers = [true, true, true];
        
        function drawSimulation(length, wandAngle) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const scale = 8;
            const pivotX = 150;
            const pivotY = 175;
            const wandLength = length * scale;
            const wandAngleRad = wandAngle * Math.PI / 180;
            
            // Calculate wand end position based on angle
            const wandEndX = pivotX + wandLength * Math.cos(wandAngleRad);
            const wandEndY = pivotY + wandLength * Math.sin(wandAngleRad);
            
            // Draw pivot point with enhanced glow
            const pivotGradient = ctx.createRadialGradient(pivotX, pivotY, 0, pivotX, pivotY, 20);
            pivotGradient.addColorStop(0, '#ff69b4');
            pivotGradient.addColorStop(0.5, '#d946a6');
            pivotGradient.addColorStop(1, 'rgba(217, 70, 166, 0)');
            ctx.fillStyle = pivotGradient;
            ctx.beginPath();
            ctx.arc(pivotX, pivotY, 20, 0, Math.PI * 2);
            ctx.fill();
            
            // Outer ring
            ctx.strokeStyle = '#d946a6';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(pivotX, pivotY, 10, 0, Math.PI * 2);
            ctx.stroke();
            
            // Inner point
            ctx.fillStyle = '#fff';
            ctx.beginPath();
            ctx.arc(pivotX, pivotY, 5, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw magic wand with triple layer effect
            ctx.shadowColor = 'rgba(217, 70, 166, 0.6)';
            ctx.shadowBlur = 20;
            
            // Outermost glow layer
            const outerGlow = ctx.createLinearGradient(pivotX, pivotY, wandEndX, wandEndY);
            outerGlow.addColorStop(0, 'rgba(240, 171, 252, 0.4)');
            outerGlow.addColorStop(0.5, 'rgba(217, 70, 166, 0.4)');
            outerGlow.addColorStop(1, 'rgba(192, 38, 211, 0.4)');
            ctx.strokeStyle = outerGlow;
            ctx.lineWidth = 20;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(pivotX, pivotY);
            ctx.lineTo(wandEndX, wandEndY);
            ctx.stroke();
            
            // Middle layer
            const middleGradient = ctx.createLinearGradient(pivotX, pivotY, wandEndX, wandEndY);
            middleGradient.addColorStop(0, '#f0abfc');
            middleGradient.addColorStop(0.2, '#e879f9');
            middleGradient.addColorStop(0.4, '#d946a6');
            middleGradient.addColorStop(0.6, '#c026d3');
            middleGradient.addColorStop(0.8, '#a21caf');
            middleGradient.addColorStop(1, '#86198f');
            ctx.strokeStyle = middleGradient;
            ctx.lineWidth = 12;
            ctx.beginPath();
            ctx.moveTo(pivotX, pivotY);
            ctx.lineTo(wandEndX, wandEndY);
            ctx.stroke();
            
            // Inner shine layer
            ctx.shadowBlur = 10;
            const shineOffsetX = -4 * Math.sin(wandAngleRad);
            const shineOffsetY = 4 * Math.cos(wandAngleRad);
            const shineGradient = ctx.createLinearGradient(
                pivotX + shineOffsetX, pivotY + shineOffsetY, 
                wandEndX + shineOffsetX, wandEndY + shineOffsetY
            );
            shineGradient.addColorStop(0, 'rgba(255, 255, 255, 0.8)');
            shineGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.4)');
            shineGradient.addColorStop(1, 'rgba(255, 255, 255, 0.1)');
            ctx.strokeStyle = shineGradient;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(pivotX + shineOffsetX, pivotY + shineOffsetY);
            ctx.lineTo(wandEndX + shineOffsetX, wandEndY + shineOffsetY);
            ctx.stroke();
            
            // Add sparkle lines
            const sparkleOffsetX = 3 * Math.sin(wandAngleRad);
            const sparkleOffsetY = -3 * Math.cos(wandAngleRad);
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(pivotX + sparkleOffsetX, pivotY + sparkleOffsetY);
            ctx.lineTo(wandEndX + sparkleOffsetX, wandEndY + sparkleOffsetY);
            ctx.stroke();
            
            // Add decorative gems and hearts along the wand
            ctx.shadowBlur = 12;
            const gemCount = Math.floor(length / 7);
            for (let i = 1; i <= gemCount; i++) {
                const t = i / (gemCount + 1);
                const gemX = pivotX + (wandEndX - pivotX) * t;
                const gemY = pivotY + (wandEndY - pivotY) * t;
                const gemSize = 5;
                
                // Gem rainbow glow
                const gemGlow = ctx.createRadialGradient(gemX, gemY, 0, gemX, gemY, gemSize * 3);
                if (i % 3 === 0) {
                    gemGlow.addColorStop(0, 'rgba(255, 105, 180, 0.8)');
                    gemGlow.addColorStop(1, 'rgba(255, 105, 180, 0)');
                } else if (i % 3 === 1) {
                    gemGlow.addColorStop(0, 'rgba(255, 215, 0, 0.8)');
                    gemGlow.addColorStop(1, 'rgba(255, 215, 0, 0)');
                } else {
                    gemGlow.addColorStop(0, 'rgba(138, 43, 226, 0.8)');
                    gemGlow.addColorStop(1, 'rgba(138, 43, 226, 0)');
                }
                ctx.fillStyle = gemGlow;
                ctx.beginPath();
                ctx.arc(gemX, gemY, gemSize * 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw gem as diamond shape
                ctx.save();
                ctx.translate(gemX, gemY);
                ctx.rotate(wandAngleRad);
                
                ctx.fillStyle = i % 3 === 0 ? '#ff69b4' : (i % 3 === 1 ? '#ffd700' : '#da70d6');
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(0, -gemSize);
                ctx.lineTo(gemSize, 0);
                ctx.lineTo(0, gemSize);
                ctx.lineTo(-gemSize, 0);
                ctx.closePath();
                ctx.fill();
                ctx.stroke();
                
                // Add sparkle on gem
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.arc(-1, -1, 1.5, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.restore();
            }
            
            ctx.shadowBlur = 0;
            ctx.shadowColor = 'transparent';
            
            // Add ribbon emoji decoration near the star (ë¨¼ì € ê·¸ë ¤ì„œ ë’¤ë¡œ)
            const ribbonT = 0.75;
            const ribbonX = pivotX + (wandEndX - pivotX) * ribbonT;
            const ribbonY = pivotY + (wandEndY - pivotY) * ribbonT;
            drawRibbon(ribbonX - 20, ribbonY, wandAngleRad);
            
            // Draw star at the end with enhanced decoration (ë‚˜ì¤‘ì— ê·¸ë ¤ì„œ ì•ìœ¼ë¡œ)
            drawStar(wandEndX, wandEndY, 35, '#ffd700');
            
            // Add small sparkles around the star
            const sparklePositions = [
                {x: -15, y: -15}, {x: 15, y: -15}, 
                {x: -15, y: 15}, {x: 15, y: 15}
            ];
            ctx.fillStyle = '#fff';
            sparklePositions.forEach(pos => {
                ctx.font = '12px Arial';
                ctx.fillText('âœ¨', wandEndX + pos.x, wandEndY + pos.y);
            });
            
            // Draw force vector (í•­ìƒ ìˆ˜í‰ 30ë„)
            const forceAngle = 30 * Math.PI / 180;
            const forceLength = 80;
            const forceEndX = wandEndX + forceLength * Math.cos(-forceAngle);
            const forceEndY = wandEndY + forceLength * Math.sin(-forceAngle);
            
            ctx.strokeStyle = '#dc2626';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(wandEndX, wandEndY);
            ctx.lineTo(forceEndX, forceEndY);
            ctx.stroke();
            
            // Arrow head
            drawArrowHead(forceEndX, forceEndY, Math.atan2(forceEndY - wandEndY, forceEndX - wandEndX));
            
            // Labels
            ctx.fillStyle = '#831843';
            ctx.font = 'bold 16px "Noto Serif KR"';
            ctx.fillText('O (íšŒì „ì¶•)', pivotX - 20, pivotY + 35);
            
            const labelX = pivotX + (wandEndX - pivotX) / 2;
            const labelY = pivotY + (wandEndY - pivotY) / 2 - 15;
            ctx.fillText(`${length} cm`, labelX - 20, labelY);
            
            ctx.fillStyle = '#d946a6';
            ctx.fillText(`ìš”ìˆ ë´‰ ê°ë„: ${wandAngle}Â°`, pivotX + 10, pivotY - 25);
            
            ctx.fillStyle = '#dc2626';
            ctx.fillText('F = 10 N', forceEndX + 10, forceEndY - 10);
            
            // Calculate torque - í˜ê³¼ ìš”ìˆ ë´‰ ì‚¬ì´ì˜ ê°ë„ ê³„ì‚°
            const r = length / 100; // convert to meters
            const F = 10; // N
            // ìš”ìˆ ë´‰ ê°ë„ì™€ í˜ì˜ ê°ë„ ì°¨ì´ ê³„ì‚°
            const effectiveAngle = Math.abs(wandAngle - (-30)); // í˜ì€ -30ë„ ë°©í–¥
            const effectiveAngleRad = effectiveAngle * Math.PI / 180;
            const torque = r * F * Math.sin(effectiveAngleRad);
            
            torqueResult.textContent = torque.toFixed(2) + ' NÂ·m';
        }
        
        function drawRibbon(x, y, wandAngle) {
            // Draw ribbon emoji with shadow and rotation (í¬ê¸° ì¦ê°€)
            ctx.save();
            ctx.translate(x + 22, y);
            ctx.rotate(wandAngle + 90 * Math.PI / 180);
            ctx.shadowColor = 'rgba(255, 105, 180, 0.6)';
            ctx.shadowBlur = 15;
            ctx.font = '45px Arial';
            ctx.fillText('ğŸ€', -22, 12);
            ctx.shadowBlur = 0;
            ctx.shadowColor = 'transparent';
            ctx.restore();
        }
        
        function drawStar(x, y, size, color) {
            // Draw soft outer glow
            const outerGlow = ctx.createRadialGradient(x, y, 0, x, y, size * 1.8);
            outerGlow.addColorStop(0, 'rgba(255, 223, 186, 0.8)');
            outerGlow.addColorStop(0.4, 'rgba(255, 192, 203, 0.5)');
            outerGlow.addColorStop(0.7, 'rgba(255, 182, 193, 0.3)');
            outerGlow.addColorStop(1, 'rgba(255, 182, 193, 0)');
            ctx.fillStyle = outerGlow;
            ctx.beginPath();
            ctx.arc(x, y, size * 1.8, 0, Math.PI * 2);
            ctx.fill();
            
            // Draw main 5-pointed star with smooth curves
            ctx.shadowColor = 'rgba(255, 215, 0, 0.9)';
            ctx.shadowBlur = 25;
            
            const starGradient = ctx.createRadialGradient(x - size * 0.3, y - size * 0.3, 0, x, y, size);
            starGradient.addColorStop(0, '#fffef0');
            starGradient.addColorStop(0.3, '#fff9c4');
            starGradient.addColorStop(0.6, '#ffd700');
            starGradient.addColorStop(0.85, '#ffa500');
            starGradient.addColorStop(1, '#ff8c00');
            
            ctx.fillStyle = starGradient;
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 4;
            ctx.lineJoin = 'round';
            
            ctx.beginPath();
            for (let i = 0; i < 5; i++) {
                const angle = (i * 2 * Math.PI) / 5 - Math.PI / 2;
                const px = x + Math.cos(angle) * size;
                const py = y + Math.sin(angle) * size;
                if (i === 0) ctx.moveTo(px, py);
                else ctx.lineTo(px, py);
                
                const innerAngle = angle + Math.PI / 5;
                const innerX = x + Math.cos(innerAngle) * (size * 0.38);
                const innerY = y + Math.sin(innerAngle) * (size * 0.38);
                ctx.lineTo(innerX, innerY);
            }
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Add inner highlight circle
            ctx.shadowBlur = 15;
            const innerGlow = ctx.createRadialGradient(x, y, 0, x, y, size * 0.3);
            innerGlow.addColorStop(0, 'rgba(255, 255, 255, 1)');
            innerGlow.addColorStop(0.5, 'rgba(255, 255, 255, 0.8)');
            innerGlow.addColorStop(1, 'rgba(255, 255, 255, 0)');
            ctx.fillStyle = innerGlow;
            ctx.beginPath();
            ctx.arc(x, y, size * 0.3, 0, Math.PI * 2);
            ctx.fill();
            
            // Reset shadow
            ctx.shadowColor = 'transparent';
            ctx.shadowBlur = 0;
            
            // Add sparkle points at each star tip
            ctx.fillStyle = '#fff';
            for (let i = 0; i < 5; i++) {
                const angle = (i * 2 * Math.PI) / 5 - Math.PI / 2;
                const sparkleX = x + Math.cos(angle) * size * 0.85;
                const sparkleY = y + Math.sin(angle) * size * 0.85;
                
                // Draw sparkle
                ctx.beginPath();
                ctx.arc(sparkleX, sparkleY, 3, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw small cross sparkle
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 1.5;
                ctx.beginPath();
                ctx.moveTo(sparkleX - 5, sparkleY);
                ctx.lineTo(sparkleX + 5, sparkleY);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(sparkleX, sparkleY - 5);
                ctx.lineTo(sparkleX, sparkleY + 5);
                ctx.stroke();
            }
            
            // Add rotating shimmer effect
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            for (let i = 0; i < 3; i++) {
                const angle = (i * 2 * Math.PI) / 3;
                const startX = x + Math.cos(angle) * (size * 0.15);
                const startY = y + Math.sin(angle) * (size * 0.15);
                const endX = x + Math.cos(angle) * (size * 0.55);
                const endY = y + Math.sin(angle) * (size * 0.55);
                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.stroke();
            }
        }
        
        function drawArrowHead(x, y, angle) {
            const headLength = 12;
            ctx.fillStyle = '#dc2626';
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x - headLength * Math.cos(angle - Math.PI / 6),
                       y - headLength * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(x - headLength * Math.cos(angle + Math.PI / 6),
                       y - headLength * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fill();
        }
        
        function createSparkles() {
            const wandEndX = 100 + lengthSlider.value * 8;
            const wandEndY = 125;
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = (wandEndX + Math.random() * 40 - 20) + 'px';
                    sparkle.style.top = (wandEndY + Math.random() * 40 - 20) + 'px';
                    sparkle.innerHTML = 'âœ¨';
                    sparkle.style.fontSize = (Math.random() * 15 + 15) + 'px';
                    document.querySelector('.canvas-container').appendChild(sparkle);
                    
                    setTimeout(() => sparkle.remove(), 1000);
                }, i * 100);
            }
        }
        
        lengthSlider.addEventListener('input', (e) => {
            const length = e.target.value;
            const angle = angleSlider.value;
            lengthValue.textContent = length + ' cm';
            drawSimulation(length, angle);
            createSparkles();
        });
        
        angleSlider.addEventListener('input', (e) => {
            const length = lengthSlider.value;
            const angle = e.target.value;
            angleValue.textContent = angle + 'Â°';
            drawSimulation(length, angle);
        });
        
        function checkAnswer(questionNum, userAnswer) {
            const feedback = document.getElementById(`feedback${questionNum}`);
            const buttons = document.querySelectorAll(`.quiz-item:nth-child(${questionNum}) .quiz-btn`);
            
            buttons.forEach(btn => btn.disabled = true);
            
            if (userAnswer === correctAnswers[questionNum - 1]) {
                feedback.className = 'quiz-feedback correct';
                feedback.style.display = 'block';
                quizAnswers[questionNum - 1] = true;
                
                // íŒ¡íŒŒë ˆ ì´íŒ©íŠ¸ ì‹¤í–‰!
                createConfetti();
                
                if (questionNum === 1) {
                    feedback.textContent = 'âœ“ ì •ë‹µì…ë‹ˆë‹¤! ëŒë¦¼í˜(Ï„)ì€ Ï„ = r Ã— F Ã— sinÎ¸ ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ rì€ íšŒì „ì¶•ìœ¼ë¡œë¶€í„°ì˜ ê±°ë¦¬(íŒ”ê¸¸ì´), FëŠ” í˜ì˜ í¬ê¸°, Î¸ëŠ” ê°ë„ì…ë‹ˆë‹¤. í˜ì˜ í¬ê¸°ê°€ í´ìˆ˜ë¡, íŒ”ê¸¸ì´ê°€ ê¸¸ìˆ˜ë¡ ëŒë¦¼í˜ì´ ì»¤ì§‘ë‹ˆë‹¤.';
                } else if (questionNum === 2) {
                    feedback.textContent = 'âœ“ ì •ë‹µì…ë‹ˆë‹¤! ëŒë¦¼í˜ì€ íŒ”ê¸¸ì´ì— ë¹„ë¡€í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ìš”ìˆ ë´‰ì˜ ê¸¸ì´ê°€ 2ë°°ê°€ ë˜ë©´ ëŒë¦¼í˜ë„ 2ë°°ê°€ ë©ë‹ˆë‹¤. ì´ê²ƒì´ ê¸´ ë Œì¹˜ê°€ ì§§ì€ ë Œì¹˜ë³´ë‹¤ ë³¼íŠ¸ë¥¼ ì‰½ê²Œ ëŒë¦´ ìˆ˜ ìˆëŠ” ì´ìœ ì…ë‹ˆë‹¤.';
                } else if (questionNum === 3) {
                    feedback.textContent = 'âœ“ ì •ë‹µì…ë‹ˆë‹¤! ëŒë¦¼í˜ì€ Ï„ = r Ã— F Ã— sinÎ¸ ì´ë¯€ë¡œ, Î¸ê°€ 90Â°ì¼ ë•Œ sinÎ¸ = 1ë¡œ ìµœëŒ€ê°’ì´ ë©ë‹ˆë‹¤. ì¦‰, í˜ì´ íŒ”ê¸¸ì´ì— ìˆ˜ì§ìœ¼ë¡œ ì‘ìš©í•  ë•Œ ëŒë¦¼í˜ì´ ê°€ì¥ í½ë‹ˆë‹¤. ë¬¸ì„ ì—´ ë•Œ ì†ì¡ì´ë¥¼ ìˆ˜ì§ìœ¼ë¡œ ë¯¸ëŠ” ê²ƒì´ ê°€ì¥ íš¨ìœ¨ì ì¸ ì´ìœ ì…ë‹ˆë‹¤.';
                }
            } else {
                feedback.className = 'quiz-feedback incorrect';
                feedback.style.display = 'block';
                feedback.textContent = 'âœ— ì•„ì‰½ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”!';
            }
            
            // Check if all answers are correct
            if (quizAnswers.every(answer => answer === true)) {
                setTimeout(() => {
                    goToPage(2);
                }, 2000);
            }
        }
        
        function goToPage(pageNum) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(`page${pageNum}`).classList.add('active');
            
            if (pageNum === 1) {
                // Reset quiz but keep feedback visible
                quizAnswers = [false, false, false];
                document.querySelectorAll('.quiz-btn').forEach(btn => btn.disabled = false);
                document.querySelectorAll('.quiz-feedback').forEach(fb => {
                    fb.style.display = 'none';
                    fb.className = 'quiz-feedback';
                    fb.textContent = '';
                });
                drawSimulation(lengthSlider.value, angleSlider.value);
            }
        }
        
        function createConfetti() {
            const colors = ['#ff69b4', '#ffc0cb', '#da70d6', '#ba55d3', '#dda0dd', '#f0abfc', '#d946a6', '#ffd700'];
            const shapes = ['ğŸ‰', 'ğŸŠ', 'â­', 'âœ¨', 'ğŸ’–', 'ğŸ’•', 'ğŸŒ¸', 'ğŸ€'];
            
            // 50ê°œì˜ ìƒ‰ì¢…ì´ ìƒì„±
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    
                    // ëœë¤ ìœ„ì¹˜ (í™”ë©´ ìƒë‹¨ì—ì„œ ì‹œì‘)
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-20px';
                    
                    // ëœë¤ ëª¨ì–‘ ì„ íƒ
                    const useShape = Math.random() > 0.5;
                    if (useShape) {
                        confetti.innerHTML = shapes[Math.floor(Math.random() * shapes.length)];
                        confetti.style.fontSize = (Math.random() * 20 + 20) + 'px';
                    } else {
                        // ìƒ‰ì¢…ì´ ì¡°ê°
                        confetti.style.width = (Math.random() * 10 + 5) + 'px';
                        confetti.style.height = (Math.random() * 10 + 5) + 'px';
                        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    }
                    
                    // ëœë¤ ì• ë‹ˆë©”ì´ì…˜ ì§€ì—°
                    confetti.style.animationDelay = (Math.random() * 0.3) + 's';
                    confetti.style.animationDuration = (Math.random() * 1 + 1.5) + 's';
                    
                    document.body.appendChild(confetti);
                    
                    // ì• ë‹ˆë©”ì´ì…˜ ëë‚˜ë©´ ì œê±°
                    setTimeout(() => confetti.remove(), 2500);
                }, i * 20);
            }
        }
        
        // Initial draw
        drawSimulation(20, 0);
    </script>
</body>
</html>