<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>등속원운동 문제 시뮬레이션</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            max-width: 900px;
            width: 100%;
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .visual-section {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .canvas-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .canvas-label {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        canvas {
            border: 2px solid #667eea;
            border-radius: 10px;
            background: white;
            display: block;
            margin: 0 auto;
        }
        
        .problem-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
        }
        
        .problem-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .given-values {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        
        .value-item {
            margin: 8px 0;
            font-size: 16px;
            color: #444;
        }
        
        .question {
            font-weight: bold;
            color: #764ba2;
            margin-top: 15px;
            font-size: 16px;
        }
        
        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
            font-size: 14px;
        }
        
        input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .new-problem-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .new-problem-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .check-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }
        
        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 16px;
            display: none;
            animation: slideIn 0.5s;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .feedback.correct {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
            display: block;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
            display: block;
        }
        
        .formula-hint {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-size: 14px;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>⚙️ 등속원운동 문제 연습</h1>
        <p class="subtitle">물리학2 - 원운동 개념 마스터하기</p>
        
        <div class="visual-section">
            <div class="canvas-container">
                <div class="canvas-label">🎯 원운동 (위에서 본 모습)</div>
                <canvas id="motionCanvas" width="450" height="450"></canvas>
            </div>
            <div class="canvas-container">
                <div class="canvas-label">📐 테이블 위 원운동 (옆에서 본 모습)</div>
                <canvas id="sideCanvas" width="450" height="300"></canvas>
            </div>
        </div>
        
        <div class="problem-section">
            <div class="problem-title">📋 문제</div>
            <div class="given-values">
                <div class="value-item">🔵 물체 B의 질량(m_B): <strong><span id="massBValue"></span> kg</strong></div>
                <div class="value-item">📏 원운동 반지름(r): <strong><span id="radiusValue"></span> m</strong></div>
                <div class="value-item">⚡ 물체 B의 속력(v): <strong><span id="velocityValue"></span> m/s</strong></div>
            </div>
            <div class="question">질문: 테이블 위에서 원운동하는 물체 B와 줄로 연결된 추 A의 질량(m_A)을 구하시오. (소수점 둘째 자리까지 반올림, 중력가속도 g = 10 m/s²)</div>
        </div>
        
        <div class="input-section">
            <div class="input-group">
                <label>추 A의 질량 (kg)</label>
                <input type="number" id="massAInput" step="0.01" placeholder="질량을 입력하세요">
            </div>
        </div>
        
        <div class="button-group">
            <button class="new-problem-btn" onclick="generateNewProblem()">🔄 새 문제</button>
            <button class="check-btn" onclick="checkAnswer()">✓ 정답 확인</button>
        </div>
        
        <div id="feedback" class="feedback"></div>
        
        <div class="formula-hint">
            <strong>💡 공식 힌트:</strong><br>
            • 구심력: F = m_B × v² / r<br>
            • 장력: T = m_A × g (추 A가 정지 상태)<br>
            • 구심력 = 장력: m_B × v² / r = m_A × g
        </div>
    </div>
    
    <script>
        let currentProblem = {
            massB: 0,
            radius: 0,
            velocity: 0,
            massA: 0
        };
        
        const canvas = document.getElementById('motionCanvas');
        const ctx = canvas.getContext('2d');
        const sideCanvas = document.getElementById('sideCanvas');
        const sideCtx = sideCanvas.getContext('2d');
        let angle = 0;
        let animationId = null;
        
        function generateNewProblem() {
            // 랜덤 값 생성
            currentProblem.massB = (Math.random() * 1.5 + 0.5).toFixed(2); // 0.5~2 kg
            currentProblem.radius = (Math.random() * 0.8 + 0.4).toFixed(2); // 0.4~1.2 m
            currentProblem.velocity = (Math.random() * 4 + 2).toFixed(2); // 2~6 m/s
            
            // 정답 계산: m_A = m_B × v² / (r × g)
            const mB = parseFloat(currentProblem.massB);
            const r = parseFloat(currentProblem.radius);
            const v = parseFloat(currentProblem.velocity);
            const g = 10;
            currentProblem.massA = (mB * v * v / (r * g)).toFixed(2);
            
            // 화면에 표시
            document.getElementById('massBValue').textContent = currentProblem.massB;
            document.getElementById('radiusValue').textContent = currentProblem.radius;
            document.getElementById('velocityValue').textContent = currentProblem.velocity;
            
            // 입력 필드 초기화
            document.getElementById('massAInput').value = '';
            
            // 피드백 숨기기
            document.getElementById('feedback').className = 'feedback';
            document.getElementById('feedback').style.display = 'none';
            
            // 애니메이션 재시작
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            angle = 0;
            drawSideView();
            animate();
        }
        
        function animate() {
            // 첫 번째 캔버스: 위에서 본 원운동
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const displayRadius = 140;
            
            // 원 그리기
            ctx.beginPath();
            ctx.arc(centerX, centerY, displayRadius, 0, 2 * Math.PI);
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // 중심점
            ctx.beginPath();
            ctx.arc(centerX, centerY, 5, 0, 2 * Math.PI);
            ctx.fillStyle = '#764ba2';
            ctx.fill();
            
            // 운동하는 물체
            const objX = centerX + displayRadius * Math.cos(angle);
            const objY = centerY + displayRadius * Math.sin(angle);
            
            ctx.beginPath();
            ctx.arc(objX, objY, 12, 0, 2 * Math.PI);
            ctx.fillStyle = '#f5576c';
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // 반지름 선
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(objX, objY);
            ctx.strokeStyle = '#999';
            ctx.lineWidth = 1;
            ctx.setLineDash([3, 3]);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // 속도 벡터
            const velX = -displayRadius * Math.sin(angle) * 0.5;
            const velY = displayRadius * Math.cos(angle) * 0.5;
            ctx.beginPath();
            ctx.moveTo(objX, objY);
            ctx.lineTo(objX + velX, objY + velY);
            ctx.strokeStyle = '#28a745';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // 구심가속도 벡터
            const accX = -displayRadius * Math.cos(angle) * 0.3;
            const accY = -displayRadius * Math.sin(angle) * 0.3;
            ctx.beginPath();
            ctx.moveTo(objX, objY);
            ctx.lineTo(objX + accX, objY + accY);
            ctx.strokeStyle = '#dc3545';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // 레이블
            ctx.font = 'bold 14px Malgun Gothic';
            ctx.fillStyle = '#333';
            ctx.fillText('B', objX + 15, objY - 15);
            ctx.fillText('r = ' + currentProblem.radius + ' m', centerX - 60, centerY - 10);
            ctx.fillStyle = '#28a745';
            ctx.fillText('v', objX + velX + 10, objY + velY);
            ctx.fillStyle = '#dc3545';
            ctx.fillText('F', objX + accX - 20, objY + accY);
            
            // 주기에 따라 각속도 조절 (속력 기반)
            const r = parseFloat(currentProblem.radius);
            const v = parseFloat(currentProblem.velocity);
            const omega = v / r; // 각속도
            angle += omega * 0.05;
            
            animationId = requestAnimationFrame(animate);
        }
        
        function drawSideView() {
            // 두 번째 캔버스: 옆에서 본 테이블 위 원운동 (정적)
            sideCtx.clearRect(0, 0, sideCanvas.width, sideCanvas.height);
            
            const sideCenterX = sideCanvas.width / 2;
            const tableY = sideCanvas.height * 0.5;
            const sideRadius = 140;
            
            // 테이블 그리기
            sideCtx.fillStyle = '#8B4513';
            sideCtx.fillRect(sideCenterX - 200, tableY, 400, 15);
            
            // 테이블 다리
            sideCtx.fillRect(sideCenterX - 190, tableY + 15, 10, 80);
            sideCtx.fillRect(sideCenterX + 180, tableY + 15, 10, 80);
            
            // 테이블 중앙 구멍 (도르래)
            sideCtx.fillStyle = '#666';
            sideCtx.fillRect(sideCenterX - 5, tableY, 10, 15);
            
            // 원운동하는 물체 B의 위치 (고정 위치)
            const fixedAngle = Math.PI / 4;
            const sideObjX = sideCenterX + sideRadius * Math.cos(fixedAngle);
            const sideObjY = tableY;
            
            // 원운동 경로 (테이블 위)
            sideCtx.beginPath();
            sideCtx.ellipse(sideCenterX, tableY, sideRadius, sideRadius * 0.25, 0, 0, 2 * Math.PI);
            sideCtx.strokeStyle = '#667eea';
            sideCtx.lineWidth = 2;
            sideCtx.setLineDash([5, 5]);
            sideCtx.stroke();
            sideCtx.setLineDash([]);
            
            // 줄 (B에서 중심으로)
            sideCtx.beginPath();
            sideCtx.moveTo(sideObjX, sideObjY);
            sideCtx.lineTo(sideCenterX, tableY);
            sideCtx.strokeStyle = '#999';
            sideCtx.lineWidth = 2;
            sideCtx.stroke();
            
            // 줄 (중심에서 아래로 추 A까지)
            const weightAY = tableY + 100;
            sideCtx.beginPath();
            sideCtx.moveTo(sideCenterX, tableY + 15);
            sideCtx.lineTo(sideCenterX, weightAY);
            sideCtx.strokeStyle = '#999';
            sideCtx.lineWidth = 2;
            sideCtx.stroke();
            
            // 물체 B
            sideCtx.beginPath();
            sideCtx.arc(sideObjX, sideObjY, 12, 0, 2 * Math.PI);
            sideCtx.fillStyle = '#f5576c';
            sideCtx.fill();
            sideCtx.strokeStyle = 'white';
            sideCtx.lineWidth = 3;
            sideCtx.stroke();
            
            // 추 A (직사각형으로 표현)
            sideCtx.fillStyle = '#4a90e2';
            sideCtx.fillRect(sideCenterX - 15, weightAY, 30, 40);
            sideCtx.strokeStyle = 'white';
            sideCtx.lineWidth = 2;
            sideCtx.strokeRect(sideCenterX - 15, weightAY, 30, 40);
            
            // 구심력 벡터 (B에서 중심 방향)
            const forceMag = 50;
            const forceX = -forceMag * Math.cos(fixedAngle);
            const forceY = 0;
            
            sideCtx.beginPath();
            sideCtx.moveTo(sideObjX, sideObjY);
            sideCtx.lineTo(sideObjX + forceX, sideObjY + forceY);
            sideCtx.strokeStyle = '#dc3545';
            sideCtx.lineWidth = 3;
            sideCtx.stroke();
            
            // 화살표
            const arrowSize = 8;
            sideCtx.beginPath();
            sideCtx.moveTo(sideObjX + forceX, sideObjY);
            sideCtx.lineTo(sideObjX + forceX + arrowSize, sideObjY - arrowSize/2);
            sideCtx.lineTo(sideObjX + forceX + arrowSize, sideObjY + arrowSize/2);
            sideCtx.closePath();
            sideCtx.fillStyle = '#dc3545';
            sideCtx.fill();
            
            // 중력 벡터 (추 A에서 아래로)
            const gravityMag = 40;
            sideCtx.beginPath();
            sideCtx.moveTo(sideCenterX, weightAY + 20);
            sideCtx.lineTo(sideCenterX, weightAY + 20 + gravityMag);
            sideCtx.strokeStyle = '#ff6b6b';
            sideCtx.lineWidth = 3;
            sideCtx.stroke();
            
            // 중력 화살표
            sideCtx.beginPath();
            sideCtx.moveTo(sideCenterX, weightAY + 20 + gravityMag);
            sideCtx.lineTo(sideCenterX - arrowSize/2, weightAY + 20 + gravityMag - arrowSize);
            sideCtx.lineTo(sideCenterX + arrowSize/2, weightAY + 20 + gravityMag - arrowSize);
            sideCtx.closePath();
            sideCtx.fillStyle = '#ff6b6b';
            sideCtx.fill();
            
            // 레이블
            sideCtx.font = 'bold 16px Malgun Gothic';
            sideCtx.fillStyle = '#333';
            sideCtx.fillText('B', sideObjX + 15, sideObjY - 15);
            sideCtx.fillText('A', sideCenterX + 20, weightAY + 25);
            
            sideCtx.font = 'bold 14px Malgun Gothic';
            sideCtx.fillStyle = '#dc3545';
            sideCtx.fillText('T (장력)', sideObjX + forceX - 20, sideObjY - 15);
            
            sideCtx.fillStyle = '#ff6b6b';
            sideCtx.fillText('m_A g', sideCenterX + 15, weightAY + 50);
            
            sideCtx.fillStyle = '#333';
            sideCtx.fillText('r', sideCenterX + 50, tableY - 10);
        }
        
        function checkAnswer() {
            const userMassA = parseFloat(document.getElementById('massAInput').value);
            
            if (isNaN(userMassA)) {
                alert('추 A의 질량을 입력해주세요!');
                return;
            }
            
            const correctMassA = parseFloat(currentProblem.massA);
            const error = Math.abs(userMassA - correctMassA) / correctMassA * 100;
            
            const feedback = document.getElementById('feedback');
            
            const mB = parseFloat(currentProblem.massB);
            const r = parseFloat(currentProblem.radius);
            const v = parseFloat(currentProblem.velocity);
            const g = 10;
            
            if (error < 2) {
                feedback.className = 'feedback correct';
                feedback.innerHTML = `
                    <strong>🎉 정답입니다!</strong><br><br>
                    ✓ 추 A의 질량: ${correctMassA} kg<br>
                    <br>훌륭합니다! 원운동과 장력의 관계를 잘 이해하고 있습니다.
                `;
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `
                    <strong>❌ 틀렸습니다!</strong><br><br>
                    <strong>📝 정답 및 풀이:</strong><br><br>
                    <strong>1️⃣ 물체 B에 작용하는 구심력</strong><br>
                    구심력: F = m_B × v² / r<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F = ${mB} × ${v}² / ${r}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F = ${mB} × ${(v * v).toFixed(2)} / ${r}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F = ${(mB * v * v / r).toFixed(2)} N<br><br>
                    
                    <strong>2️⃣ 추 A의 무게 (장력과 같음)</strong><br>
                    장력 T = 구심력 F (줄이 연결되어 있으므로)<br>
                    m_A × g = ${(mB * v * v / r).toFixed(2)}<br>
                    m_A = ${(mB * v * v / r).toFixed(2)} / ${g}<br>
                    <strong>정답: m_A = ${correctMassA} kg</strong><br>
                    입력값: ${userMassA} kg ✗
                `;
            }
            
            feedback.style.display = 'block';
        }
        
        // 엔터키로 정답 확인
        document.getElementById('massAInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        
        // 초기 문제 생성
        generateNewProblem();
    </script>
</body>
</html>