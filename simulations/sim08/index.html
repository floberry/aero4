<!DOCTYPE html>

<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›ìš´ë™ ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 400px;
            width: 100%;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .canvas-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        canvas {
            border: 2px solid #ddd;
            border-radius: 10px;
            background: #f8f9fa;
        }

        .controls {
            margin: 20px 0;
        }

        .problem-info {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #2196F3;
            position: relative;
        }

        .mascot {
            position: absolute;
            right: 10px;
            top: 10px;
            width: 50px;
            height: 50px;
        }

        .input-section {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        button {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            margin: 10px 0;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            margin: 10px 0;
            box-sizing: border-box;
        }

        .result {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .result.wrong {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .explanation {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .formula {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            text-align: center;
            margin: 10px 0;
            border: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ€ ì›ìš´ë™ ë¬¼ë¦¬ ë¬¸ì œ</h1>

        <div class="canvas-container">
            <canvas id="canvas" width="350" height="300"></canvas>
        </div>

        <div class="controls">
            <button onclick="newProblem()">ğŸ² ìƒˆ ë¬¸ì œ</button>
        </div>

        <div class="problem-info" id="problemInfo">
            ë¬¸ì œë¥¼ ìƒì„±í•˜ë ¤ë©´ 'ìƒˆ ë¬¸ì œ' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
            <div class="mascot">
                <svg width="50" height="50" viewBox="0 0 50 50">
                    <!-- í´ë¡œë²„ -->
                    <g transform="translate(35, 15)">
                        <circle cx="0" cy="-3" r="3" fill="#4CAF50"/>
                        <circle cx="3" cy="0" r="3" fill="#4CAF50"/>
                        <circle cx="0" cy="3" r="3" fill="#4CAF50"/>
                        <circle cx="-3" cy="0" r="3" fill="#4CAF50"/>
                        <rect x="-0.5" y="3" width="1" height="4" fill="#2E7D32"/>
                    </g>
                    <!-- ìºë¦­í„° ì–¼êµ´ -->
                    <circle cx="20" cy="30" r="12" fill="#E0E0E0"/>
                    <!-- ëˆˆ -->
                    <circle cx="17" cy="27" r="2" fill="black"/>
                    <circle cx="23" cy="27" r="2" fill="black"/>
                    <circle cx="17.5" cy="26.5" r="0.5" fill="white"/>
                    <circle cx="23.5" cy="26.5" r="0.5" fill="white"/>
                    <!-- ì… -->
                    <path d="M 18 32 Q 20 34 22 32" stroke="#FF6B6B" stroke-width="1.5" fill="none"/>
                    <!-- ëª¸ -->
                    <ellipse cx="20" cy="42" rx="8" ry="6" fill="#F5F5F5"/>
                    <!-- íŒ” -->
                    <circle cx="15" cy="40" r="3" fill="#4CAF50"/>
                    <circle cx="25" cy="40" r="3" fill="#4CAF50"/>
                </svg>
            </div>
        </div>

        <div class="input-section">
            <label for="answer">ë¬¼ì²´ Aì˜ ì§ˆëŸ‰ (kg):</label>
            <input type="number" id="answer" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" min="0.1" step="0.1">
            <button onclick="checkAnswer()">âœ… ì •ë‹µ í™•ì¸</button>
        </div>

        <div id="result"></div>
        <div id="explanation"></div>
    </div>

    <script>
        let currentProblem = null;
        let animationId = null;
        let angle = 0;
        let fireworks = [];
        let showFireworks = false;

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        function newProblem() {
            // ë¬¼ì²´ Bì˜ ì§ˆëŸ‰ê³¼ ì†ë ¥ì„ ë¬´ì‘ìœ„ë¡œ ì„¤ì •
            const massB = Math.floor(Math.random() * 5) + 1; // 1~5 kg
            const velocityB = Math.floor(Math.random() * 4) + 1; // 1~4 m/s
            const radius = 0.5; // 0.5m ê³ ì •
            const g = 10; // ì¤‘ë ¥ê°€ì†ë„ 10 m/sÂ²

            // êµ¬ì‹¬ë ¥ = ì¤‘ë ¥ì´ë¯€ë¡œ: mB * vÂ² / r = mA * g
            // mA = (mB * vÂ²) / (r * g)
            const massA = (massB * velocityB * velocityB) / (radius * g);

            currentProblem = {
                massB: massB,
                velocityB: velocityB,
                radius: radius,
                massA: massA
            };

            document.getElementById('problemInfo').innerHTML = `
                <strong>ğŸ“‹ ë¬¸ì œ ì¡°ê±´</strong><br>
                â€¢ ë¬¼ì²´ Bì˜ ì§ˆëŸ‰: ${massB} kg<br>
                â€¢ ë¬¼ì²´ Bì˜ ì†ë ¥: ${velocityB} m/s<br>
                â€¢ ë°˜ì§€ë¦„: ${radius} m<br>
                â€¢ ì¤‘ë ¥ê°€ì†ë„: 10 m/sÂ²<br><br>
                <strong>â“ ë¬¼ì²´ Aì˜ ì§ˆëŸ‰ì„ êµ¬í•˜ì„¸ìš”!</strong>
                <div class="mascot">
                    <svg width="50" height="50" viewBox="0 0 50 50">
                        <!-- í´ë¡œë²„ -->
                        <g transform="translate(35, 15)">
                            <circle cx="0" cy="-3" r="3" fill="#4CAF50"/>
                            <circle cx="3" cy="0" r="3" fill="#4CAF50"/>
                            <circle cx="0" cy="3" r="3" fill="#4CAF50"/>
                            <circle cx="-3" cy="0" r="3" fill="#4CAF50"/>
                            <rect x="-0.5" y="3" width="1" height="4" fill="#2E7D32"/>
                        </g>
                        <!-- ìºë¦­í„° ì–¼êµ´ -->
                        <circle cx="20" cy="30" r="12" fill="#E0E0E0"/>
                        <!-- ëˆˆ -->
                        <circle cx="17" cy="27" r="2" fill="black"/>
                        <circle cx="23" cy="27" r="2" fill="black"/>
                        <circle cx="17.5" cy="26.5" r="0.5" fill="white"/>
                        <circle cx="23.5" cy="26.5" r="0.5" fill="white"/>
                        <!-- ì… -->
                        <path d="M 18 32 Q 20 34 22 32" stroke="#FF6B6B" stroke-width="1.5" fill="none"/>
                        <!-- ëª¸ -->
                        <ellipse cx="20" cy="42" rx="8" ry="6" fill="#F5F5F5"/>
                        <!-- íŒ” -->
                        <circle cx="15" cy="40" r="3" fill="#4CAF50"/>
                        <circle cx="25" cy="40" r="3" fill="#4CAF50"/>
                    </svg>
                </div>
            `;

            document.getElementById('answer').value = '';
            document.getElementById('result').innerHTML = '';
            document.getElementById('explanation').innerHTML = '';

            // í­ì£½ íš¨ê³¼ ë¦¬ì…‹
            showFireworks = false;
            fireworks = [];

            startAnimation();
        }

        function checkAnswer() {
            if (!currentProblem) {
                alert('ë¨¼ì € ìƒˆ ë¬¸ì œë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”!');
                return;
            }

            const userAnswer = parseFloat(document.getElementById('answer').value);
            const correctAnswer = currentProblem.massA;

            const resultDiv = document.getElementById('result');
            const explanationDiv = document.getElementById('explanation');

            if (Math.abs(userAnswer - correctAnswer) < 0.01) {
                resultDiv.innerHTML = `
                    <strong>ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!</strong><br>
                    ë¬¼ì²´ Aì˜ ì§ˆëŸ‰: ${correctAnswer.toFixed(2)} kg
                `;
                resultDiv.className = 'result';
                
                // í­ì£½ íš¨ê³¼ ì‹œì‘
                startFireworks();
            } else {
                resultDiv.innerHTML = `
                    <strong>âŒ ì˜¤ë‹µì…ë‹ˆë‹¤.</strong><br>
                    ì •ë‹µ: ${correctAnswer.toFixed(2)} kg<br>
                    ì…ë ¥í•œ ë‹µ: ${userAnswer} kg
                `;
                resultDiv.className = 'result wrong';
            }

            // í•´ì„¤ í‘œì‹œ
            const centripetal_force = (currentProblem.massB * currentProblem.velocityB * currentProblem.velocityB) / currentProblem.radius;
            
            explanationDiv.innerHTML = `
                <strong>ğŸ“š í•´ì„¤</strong><br><br>
                
                <strong>1. êµ¬ì‹¬ë ¥ ê³µì‹:</strong><br>
                êµ¬ì‹¬ë ¥ F = mvÂ²/r (m: ì§ˆëŸ‰, v: ì†ë ¥, r: ë°˜ì§€ë¦„)<br><br>
                
                <strong>2. ë¬¼ì²´ Bì— ì‘ìš©í•˜ëŠ” êµ¬ì‹¬ë ¥ ê³„ì‚°:</strong><br>
                <div class="formula">F = ${currentProblem.massB} Ã— ${currentProblem.velocityB}Â² Ã· ${currentProblem.radius}</div>
                <div class="formula">F = ${currentProblem.massB} Ã— ${currentProblem.velocityB * currentProblem.velocityB} Ã· ${currentProblem.radius} = ${centripetal_force.toFixed(1)} N</div><br>
                
                <strong>3. í˜ì˜ í‰í˜• ì¡°ê±´:</strong><br>
                ë¬¼ì²´ Bì˜ êµ¬ì‹¬ë ¥ = ë¬¼ì²´ Aì˜ ì¤‘ë ¥<br>
                <div class="formula">Fêµ¬ì‹¬ë ¥ = Fì¤‘ë ¥</div>
                <div class="formula">${centripetal_force.toFixed(1)} N = mâ‚ Ã— g</div>
                <div class="formula">${centripetal_force.toFixed(1)} N = mâ‚ Ã— 10 m/sÂ²</div><br>
                
                <strong>4. ë¬¼ì²´ Aì˜ ì§ˆëŸ‰ ê³„ì‚°:</strong><br>
                <div class="formula">mâ‚ = ${centripetal_force.toFixed(1)} Ã· 10 = ${currentProblem.massA.toFixed(2)} kg</div>
            `;
            explanationDiv.className = 'explanation';
        }

        function startAnimation() {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            animate();
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ì±…ìƒ ê·¸ë¦¬ê¸° (ì‚¬ë‹¤ë¦¬ê¼´ í˜•íƒœ, íŒŒìŠ¤í…”í†¤)
            drawTable();
            
            // íƒ€ì› ê¶¤ë„ ê·¸ë¦¬ê¸°
            drawOrbit();
            
            // ì‹¤ ê·¸ë¦¬ê¸°
            drawString();
            
            // ë¬¼ì²´ A ê·¸ë¦¬ê¸° (ì •ìœ¡ë©´ì²´)
            drawObjectA();
            
            // ë¬¼ì²´ B ê·¸ë¦¬ê¸° (ì›í˜•, ì›ê·¼ë²• ì ìš©)
            drawObjectB();
            
            // í­ì£½ ê·¸ë¦¬ê¸°
            if (showFireworks) {
                drawFireworks();
                updateFireworks();
            }
            
            angle += 0.02 * (currentProblem ? currentProblem.velocityB : 1);
            animationId = requestAnimationFrame(animate);
        }

        function drawTable() {
            // ì±…ìƒ ë©´ (ì‚¬ë‹¤ë¦¬ê¼´ - ìœ„ìª½ì´ ì•„ë˜ìª½ë³´ë‹¤ ì§§ìŒ)
            ctx.fillStyle = '#E8D5FF'; // íŒŒìŠ¤í…” ë³´ë¼
            ctx.beginPath();
            ctx.moveTo(80, 120);   // ì™¼ìª½ ìœ„
            ctx.lineTo(270, 120);  // ì˜¤ë¥¸ìª½ ìœ„
            ctx.lineTo(300, 180);  // ì˜¤ë¥¸ìª½ ì•„ë˜
            ctx.lineTo(50, 180);   // ì™¼ìª½ ì•„ë˜
            ctx.closePath();
            ctx.fill();
            
            // ë§ˆì´ë©œë¡œë”” ìºë¦­í„° ê·¸ë¦¬ê¸° (ì™¼ìª½ êµ¬ì„ì— ë°°ì¹˜)
            drawMyMelody();
            
            // ì±…ìƒ í…Œë‘ë¦¬
            ctx.strokeStyle = '#D1C4E9';
            ctx.lineWidth = 2;
            ctx.stroke();

            // ì±…ìƒ ë‹¤ë¦¬ (ì•ìª½ ë‘ ê°œë§Œ)
            ctx.fillStyle = '#F8BBD9'; // íŒŒìŠ¤í…” í•‘í¬
            // ì™¼ìª½ ë‹¤ë¦¬
            ctx.fillRect(50, 180, 8, 60);
            // ì˜¤ë¥¸ìª½ ë‹¤ë¦¬
            ctx.fillRect(292, 180, 8, 60);
        }

        function drawMyMelody() {
            // ìºë¦­í„°ë¥¼ ê¶¤ë„ì—ì„œ ë©€ë¦¬ ë–¨ì–´ëœ¨ë¦¬ê¸° ìœ„í•´ ì™¼ìª½ ëì— ë°°ì¹˜
            const centerX = 85;
            const centerY = 155;
            
            // ëª¸ (íƒ€ì›í˜•)
            ctx.fillStyle = '#FFE4E1';
            ctx.beginPath();
            ctx.ellipse(centerX, centerY + 5, 12, 10, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            // ë¨¸ë¦¬ (ì›í˜•)
            ctx.fillStyle = '#FFE4E1';
            ctx.beginPath();
            ctx.arc(centerX, centerY - 8, 10, 0, 2 * Math.PI);
            ctx.fill();
            
            // ê·€ (í•‘í¬ ì•ˆìª½)
            ctx.fillStyle = '#FFB6C1';
            ctx.beginPath();
            ctx.ellipse(centerX - 6, centerY - 15, 3, 6, -0.3, 0, 2 * Math.PI);
            ctx.fill();
            ctx.beginPath();
            ctx.ellipse(centerX + 6, centerY - 15, 3, 6, 0.3, 0, 2 * Math.PI);
            ctx.fill();
            
            // í›„ë“œ (í•‘í¬)
            ctx.fillStyle = '#FFB6C1';
            ctx.beginPath();
            ctx.arc(centerX, centerY - 8, 10, Math.PI, 0, false);
            ctx.fill();
            
            // ëˆˆ
            ctx.fillStyle = '#8B4513';
            ctx.beginPath();
            ctx.arc(centerX - 3, centerY - 10, 1, 0, 2 * Math.PI);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(centerX + 3, centerY - 10, 1, 0, 2 * Math.PI);
            ctx.fill();
            
            // ì½” (ì‘ì€ ë…¸ë€ ì‚¼ê°í˜•)
            ctx.fillStyle = '#FFD700';
            ctx.beginPath();
            ctx.moveTo(centerX, centerY - 6);
            ctx.lineTo(centerX - 1, centerY - 4);
            ctx.lineTo(centerX + 1, centerY - 4);
            ctx.closePath();
            ctx.fill();
            
            // ì… (ì‘ì€ ê³¡ì„ )
            ctx.strokeStyle = '#FFB6C1';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.arc(centerX, centerY - 3, 2, 0.2, Math.PI - 0.2);
            ctx.stroke();
        }

        function drawOrbit() {
            const centerX = 175;
            const centerY = 150;
            const radiusX = 70;
            const radiusY = 25;

            ctx.setLineDash([5, 5]);
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.ellipse(centerX, centerY, radiusX, radiusY, 0, 0, 2 * Math.PI);
            ctx.stroke();
            ctx.setLineDash([]);

            // ì¤‘ì‹¬ì—ì„œ ë°˜ì§€ë¦„ ë°©í–¥ìœ¼ë¡œ ì„  ê·¸ë¦¬ê¸°
            const objX = centerX + radiusX * Math.cos(angle);
            const objY = centerY + radiusY * Math.sin(angle);
            
            ctx.strokeStyle = '#999';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(objX, objY);
            ctx.stroke();
        }

        function drawString() {
            const centerX = 175;
            const centerY = 150;
            const tableTop = 180;  // ì±…ìƒ ìœ—ë©´ Y ì¢Œí‘œ
            const stringEndY = 250;

            // 1. ê¶¤ë„ ì¤‘ì‹¬ì—ì„œ ì±…ìƒ ìœ—ë©´ê¹Œì§€ (ê°€ë ¤ì§€ëŠ” ë¶€ë¶„ - ì ì„ )
            ctx.strokeStyle = '#999';
            ctx.lineWidth = 2;
            ctx.setLineDash([4, 4]);
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(centerX, tableTop);
            ctx.stroke();

            // 2. ì±…ìƒ ì•„ë˜ì—ì„œ ë¬¼ì²´ Aê¹Œì§€ (ë³´ì´ëŠ” ë¶€ë¶„ - ì‹¤ì„ )
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.setLineDash([]);
            ctx.beginPath();
            ctx.moveTo(centerX, tableTop);
            ctx.lineTo(centerX, stringEndY);
            ctx.stroke();

            // ì‹¤ì˜ ì—°ê²°ì  í‘œì‹œ (ê¶¤ë„ ì¤‘ì‹¬ì—ì„œ)
            ctx.fillStyle = '#666';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 2, 0, 2 * Math.PI);
            ctx.fill();

            // ì‹¤ì˜ ì—°ê²°ì  í‘œì‹œ (ë¬¼ì²´ Aì—ì„œ)
            ctx.fillStyle = '#333';
            ctx.beginPath();
            ctx.arc(centerX, stringEndY - 20, 2, 0, 2 * Math.PI);
            ctx.fill();
        }

        function drawObjectA() {
            const centerX = 175;
            const objectY = 250;

            // ì •ìœ¡ë©´ì²´ ê·¸ë¦¬ê¸°
            ctx.fillStyle = '#FFB74D';
            ctx.strokeStyle = '#FF9800';
            ctx.lineWidth = 2;
            
            // ì•ë©´
            ctx.fillRect(centerX - 15, objectY - 15, 30, 30);
            ctx.strokeRect(centerX - 15, objectY - 15, 30, 30);
            
            // ìœ—ë©´ (ì•½ê°„ ê¸°ìš¸ì–´ì§„ ì‚¬ê°í˜•)
            ctx.fillStyle = '#FFCC02';
            ctx.beginPath();
            ctx.moveTo(centerX - 15, objectY - 15);
            ctx.lineTo(centerX - 10, objectY - 20);
            ctx.lineTo(centerX + 20, objectY - 20);
            ctx.lineTo(centerX + 15, objectY - 15);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // ì˜†ë©´
            ctx.fillStyle = '#FFD54F';
            ctx.beginPath();
            ctx.moveTo(centerX + 15, objectY - 15);
            ctx.lineTo(centerX + 20, objectY - 20);
            ctx.lineTo(centerX + 20, objectY + 10);
            ctx.lineTo(centerX + 15, objectY + 15);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();

            // ë¼ë²¨ (ê¸€ì”¨ í¬ê¸° ì¡°ì •)
            ctx.fillStyle = 'white';
            ctx.fillRect(centerX + 25, objectY - 10, 55, 20);
            ctx.strokeStyle = '#333';
            ctx.strokeRect(centerX + 25, objectY - 10, 55, 20);
            ctx.fillStyle = '#333';
            ctx.font = '10px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('ë¬¼ì²´ A', centerX + 52, objectY - 2);
            ctx.fillText('? kg', centerX + 52, objectY + 8);
        }

        function drawObjectB() {
            if (!currentProblem) return;

            const centerX = 175;
            const centerY = 150;
            const radiusX = 70;
            const radiusY = 25;

            const objX = centerX + radiusX * Math.cos(angle);
            const objY = centerY + radiusY * Math.sin(angle);

            // ì›ê·¼ë²• ì ìš© - sinê°’ì— ë”°ë¼ í¬ê¸° ë³€í™”
            const depth = Math.sin(angle);
            const scale = 0.7 + 0.3 * (depth + 1) / 2; // 0.7 ~ 1.0
            const radius = 15 * scale;

            // ë¬¼ì²´ B (ì›í˜•)
            ctx.fillStyle = depth > 0 ? '#4CAF50' : '#388E3C'; // ì•ìª½ì€ ë°ê²Œ, ë’¤ìª½ì€ ì–´ë‘¡ê²Œ
            ctx.beginPath();
            ctx.arc(objX, objY, radius, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = '#2E7D32';
            ctx.lineWidth = 2;
            ctx.stroke();

            // ë¼ë²¨
            const labelX = objX + 25;
            const labelY = objY - 25;
            ctx.fillStyle = 'white';
            ctx.fillRect(labelX, labelY, 80, 35);
            ctx.strokeStyle = '#333';
            ctx.strokeRect(labelX, labelY, 80, 35);
            ctx.fillStyle = '#333';
            ctx.font = '10px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('ë¬¼ì²´ B', labelX + 5, labelY + 12);
            ctx.fillText(`${currentProblem.massB}kg`, labelX + 5, labelY + 23);
            ctx.fillText(`${currentProblem.velocityB}m/s`, labelX + 5, labelY + 32);
        }

        // í­ì£½ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function startFireworks() {
            showFireworks = true;
            fireworks = [];
            
            // ì—¬ëŸ¬ ê°œì˜ í­ì£½ ìƒì„±
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    createFirework();
                }, i * 200);
            }
            
            // 4ì´ˆ í›„ í­ì£½ íš¨ê³¼ ì¢…ë£Œ
            setTimeout(() => {
                showFireworks = false;
                fireworks = [];
            }, 4000);
        }

        function createFirework() {
            const centerX = 50 + Math.random() * (canvas.width - 100);
            const centerY = 50 + Math.random() * (canvas.height * 0.5);
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57', '#FF9FF3', '#54A0FF', '#FD79A8', '#FDCB6E', '#6C5CE7'];
            
            const firework = {
                x: centerX,
                y: centerY,
                particles: []
            };
            
            // ì…ìë“¤ ìƒì„± (ë” ë§ì€ ì…ìë¡œ í™”ë ¤í•˜ê²Œ)
            for (let i = 0; i < 20; i++) {
                const angle = (Math.PI * 2 * i) / 20;
                const velocity = Math.random() * 4 + 2;
                
                firework.particles.push({
                    x: centerX,
                    y: centerY,
                    vx: Math.cos(angle) * velocity,
                    vy: Math.sin(angle) * velocity,
                    life: 1.0,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 4 + 2
                });
            }
            
            fireworks.push(firework);
        }

        function updateFireworks() {
            fireworks.forEach((firework, fireworkIndex) => {
                firework.particles.forEach((particle, particleIndex) => {
                    // ìœ„ì¹˜ ì—…ë°ì´íŠ¸
                    particle.x += particle.vx;
                    particle.y += particle.vy;
                    
                    // ì¤‘ë ¥ íš¨ê³¼ì™€ ë§ˆì°°
                    particle.vy += 0.15;
                    particle.vx *= 0.99;
                    particle.vy *= 0.99;
                    
                    // ìˆ˜ëª… ê°ì†Œ
                    particle.life -= 0.015;
                    
                    // ìˆ˜ëª…ì´ ë‹¤í•œ ì…ì ì œê±°
                    if (particle.life <= 0) {
                        firework.particles.splice(particleIndex, 1);
                    }
                });
                
                // ì…ìê°€ ëª¨ë‘ ì‚¬ë¼ì§„ í­ì£½ ì œê±°
                if (firework.particles.length === 0) {
                    fireworks.splice(fireworkIndex, 1);
                }
            });
        }

        function drawFireworks() {
            fireworks.forEach(firework => {
                firework.particles.forEach(particle => {
                    ctx.save();
                    ctx.globalAlpha = particle.life;
                    ctx.fillStyle = particle.color;
                    ctx.shadowBlur = 15;
                    ctx.shadowColor = particle.color;
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.size, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // ê¼¬ë¦¬ íš¨ê³¼ ì¶”ê°€
                    ctx.globalAlpha = particle.life * 0.3;
                    ctx.beginPath();
                    ctx.arc(particle.x - particle.vx, particle.y - particle.vy, particle.size * 0.5, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    ctx.restore();
                });
            });
        }

        // ì´ˆê¸° ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
        animate();
    </script>
</body>