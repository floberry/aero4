<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏóòÎ¶¨Î≤†Ïù¥ÌÑ∞ Î¨ºÎ¶¨ Î¨∏Ï†ú</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            padding: 30px;
            backdrop-filter: blur(10px);
        }
        
        .title {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .problem-text {
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #34495e;
            background: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .diagrams {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            gap: 15px;
        }
        
        .diagram {
            flex: 1;
            text-align: center;
        }
        
        .elevator-diagram {
            width: 140px;
            height: 180px;
            border: 3px solid #34495e;
            border-radius: 12px;
            margin: 0 auto 15px;
            position: relative;
            background: linear-gradient(to bottom, #f8f9fa, #e9ecef);
        }
        
        .elevator-door {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            height: 130px;
            border: 2px solid #6c757d;
            border-radius: 6px;
            background: #f1f3f4;
        }
        
        .person {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 90px;
        }
        
        .head {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid #2c3e50;
            margin: 0 auto 2px;
            background: #fdbcb4;
        }
        
        .body {
            width: 24px;
            height: 35px;
            background: #3498db;
            margin: 5px auto;
            border-radius: 4px;
        }
        
        .scale {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 15px;
            border: 2px solid #2c3e50;
            background: linear-gradient(to bottom, #ddd, #bbb);
            border-radius: 3px;
        }
        
        .scale-display {
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            background: #000;
            color: #0f0;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
            font-weight: bold;
        }
        
        .graph-container {
            width: 200px;
            height: 180px;
            position: relative;
            margin: 0 auto;
        }
        
        .graph {
            width: 100%;
            height: 100%;
            border-left: 3px solid #2c3e50;
            border-bottom: 3px solid #2c3e50;
            position: relative;
            background: #fff;
            border-radius: 0 5px 0 0;
        }
        
        .axis-label {
            position: absolute;
            font-size: 13px;
            color: #2c3e50;
            font-weight: bold;
        }
        
        .x-label {
            bottom: -20px;
            right: -15px;
        }
        
        .y-label {
            top: -20px;
            left: -15px;
        }
        
        .tick {
            position: absolute;
            font-size: 11px;
            color: #666;
        }
        
        .diagram-label {
            font-weight: bold;
            margin-top: 15px;
            font-size: 16px;
            color: #2c3e50;
        }
        
        .question-box {
            background: linear-gradient(135deg, #e8f4fd, #d1ecf1);
            border: 2px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }
        
        .question-text {
            font-size: 16px;
            margin-bottom: 20px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .answer-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .btn-answer {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            min-width: 60px;
        }
        
        .btn-answer:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(46, 204, 113, 0.4);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            width: 100%;
            margin-top: 25px;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            font-size: 14px;
            display: none;
            line-height: 1.8;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .result.correct {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border: 2px solid #27ae60;
            color: #155724;
        }
        
        .result.incorrect {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            border: 2px solid #e74c3c;
            color: #721c24;
        }
        
        .explanation {
            margin-top: 15px;
            font-size: 13px;
            line-height: 1.8;
            white-space: pre-line;
            background: rgba(255,255,255,0.7);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">üè¢ ÏóòÎ¶¨Î≤†Ïù¥ÌÑ∞ Î¨ºÎ¶¨ Î¨∏Ï†ú</div>
        
        <div class="problem-text" id="problemText">
            Í∑∏Î¶º (Í∞Ä)Îäî ÏóòÎ¶¨Î≤†Ïù¥ÌÑ∞ ÏïàÏóêÏÑú ÏÇ¨ÎûåÏùò Î¨¥Í≤åÎ•º Ï†ÄÏö∏Î°ú Ï∏°Ï†ïÌïòÎäî Î™®ÏäµÏùÑ ÎÇòÌÉÄÎÇ∏ Í≤ÉÏù¥Îã§. 
            Í∑∏Î¶º (ÎÇò)Îäî <span id="timeRange"></span>ÍπåÏßÄ Ï†ïÏßÄÌï¥ ÏûàÎçò (Í∞Ä)Ïùò ÏóòÎ¶¨Î≤†Ïù¥ÌÑ∞Í∞Ä <span id="startTime"></span>Î∂ÄÌÑ∞ 
            Ïó∞ÏßÅ Î∞©Ìñ•ÏúºÎ°ú Ïö¥ÎèôÌï† Îïå, Ï†ÄÏö∏Ïóê Ï∏°Ï†ïÎêòÎäî Î¨¥Í≤åÎ•º ÏãúÍ∞ÑÏóê Îî∞Îùº ÎÇòÌÉÄÎÇ∏ Í≤ÉÏù¥Îã§.
        </div>
        
        <div class="diagrams">
            <div class="diagram">
                <div class="elevator-diagram">
                    <div class="elevator-door"></div>
                    <div class="person">
                        <div class="head"></div>
                        <div class="body"></div>
                    </div>
                    <div class="scale">
                        <div class="scale-display" id="scaleDisplay">500N</div>
                    </div>
                </div>
                <div class="diagram-label">(Í∞Ä)</div>
            </div>
            
            <div class="diagram">
                <div class="graph-container">
                    <div class="graph" id="graph">
                        <div class="axis-label y-label">Î¨¥Í≤å(N)</div>
                        <div class="axis-label x-label">ÏãúÍ∞Ñ(Ï¥à)</div>
                    </div>
                </div>
                <div class="diagram-label">(ÎÇò)</div>
            </div>
        </div>
        
        <div class="question-box">
            <div class="question-text" id="questionText"></div>
            <div class="answer-buttons">
                <button class="btn btn-answer" onclick="checkAnswer(true)">‚≠ï O</button>
                <button class="btn btn-answer" onclick="checkAnswer(false)">‚ùå X</button>
            </div>
            <div class="result" id="result"></div>
        </div>
        
        <button class="btn btn-primary" onclick="generateNewProblem()">üîÑ ÏÉà Î¨∏Ï†ú</button>
    </div>

    <script>
        let currentProblem = {};
        let answered = false;
        let currentGraphData = {};
        
        function generateNewProblem() {
            const weights = [];
            for (let w = 400; w <= 700; w += 10) {
                weights.push(w);
            }
            const actualWeight = weights[Math.floor(Math.random() * weights.length)];
            
            const differences = [10, 20, 30, 40];
            const difference = differences[Math.floor(Math.random() * differences.length)];
            
            const yValues = [
                actualWeight - difference,
                actualWeight,
                actualWeight + difference
            ];
            
            const graphPattern = generateLimitedGraphPattern(actualWeight, yValues);
            
            currentGraphData = {
                actualWeight,
                yValues,
                graphPattern,
                difference
            };
            
            const firstStopEnd = graphPattern[0].endTime;
            const firstMotionStart = graphPattern.find(p => p.type !== 'stop')?.startTime || firstStopEnd;
            
            document.getElementById('timeRange').textContent = `0Ï¥àÎ∂ÄÌÑ∞ ${firstStopEnd}Ï¥à`;
            document.getElementById('startTime').textContent = `${firstMotionStart}Ï¥à`;
            document.getElementById('scaleDisplay').textContent = `${actualWeight}N`;
            
            drawGraph();
            generateQuestion();
            
            document.getElementById('result').style.display = 'none';
            answered = false;
        }
        
        function generateLimitedGraphPattern(actualWeight, yValues) {
            const patterns = [
                // 4Íµ¨Í∞Ñ Ìå®ÌÑ¥Îì§ - Îëê Î≤àÏß∏ Íµ¨Í∞ÑÏù¥ ÎÑ§ Î≤àÏß∏ Íµ¨Í∞ÑÎ≥¥Îã§ Í∏∏Í≤å ÏàòÏ†ï
                [
                    { startTime: 0, endTime: 2, weight: actualWeight, type: 'stop', motionDirection: null },
                    { startTime: 2, endTime: 6, weight: yValues[2], type: 'acceleration', motionDirection: 'up' }, // 4Ï¥à
                    { startTime: 6, endTime: 8, weight: actualWeight, type: 'uniform', motionDirection: 'up' }, // 2Ï¥à
                    { startTime: 8, endTime: 9, weight: yValues[0], type: 'deceleration', motionDirection: 'up' } // 1Ï¥à
                ],
                [
                    { startTime: 0, endTime: 1, weight: actualWeight, type: 'stop', motionDirection: null },
                    { startTime: 1, endTime: 5, weight: yValues[0], type: 'acceleration', motionDirection: 'down' }, // 4Ï¥à
                    { startTime: 5, endTime: 7, weight: actualWeight, type: 'uniform', motionDirection: 'down' }, // 2Ï¥à
                    { startTime: 7, endTime: 9, weight: actualWeight, type: 'stop', motionDirection: null } // 2Ï¥à
                ],
                [
                    { startTime: 0, endTime: 1.5, weight: actualWeight, type: 'stop', motionDirection: null },
                    { startTime: 1.5, endTime: 6.5, weight: yValues[2], type: 'acceleration', motionDirection: 'up' }, // 5Ï¥à
                    { startTime: 6.5, endTime: 8, weight: actualWeight, type: 'uniform', motionDirection: 'up' }, // 1.5Ï¥à
                    { startTime: 8, endTime: 9, weight: yValues[0], type: 'deceleration', motionDirection: 'up' } // 1Ï¥à
                ],
                // 3Íµ¨Í∞Ñ Ìå®ÌÑ¥Îì§
                [
                    { startTime: 0, endTime: 1.5, weight: actualWeight, type: 'stop', motionDirection: null },
                    { startTime: 1.5, endTime: 5.5, weight: yValues[0], type: 'acceleration', motionDirection: 'down' },
                    { startTime: 5.5, endTime: 9, weight: yValues[2], type: 'deceleration', motionDirection: 'down' }
                ],
                [
                    { startTime: 0, endTime: 1, weight: actualWeight, type: 'stop', motionDirection: null },
                    { startTime: 1, endTime: 4, weight: yValues[2], type: 'acceleration', motionDirection: 'up' },
                    { startTime: 4, endTime: 9, weight: actualWeight, type: 'uniform', motionDirection: 'up' }
                ],
                [
                    { startTime: 0, endTime: 2, weight: actualWeight, type: 'stop', motionDirection: null },
                    { startTime: 2, endTime: 5, weight: yValues[0], type: 'acceleration', motionDirection: 'down' },
                    { startTime: 5, endTime: 9, weight: actualWeight, type: 'uniform', motionDirection: 'down' }
                ]
            ];
            
            return patterns[Math.floor(Math.random() * patterns.length)];
        }
        
        function drawGraph() {
            const { actualWeight, yValues, graphPattern } = currentGraphData;
            const graph = document.getElementById('graph');
            graph.innerHTML = `
                <div class="axis-label y-label">Î¨¥Í≤å(N)</div>
                <div class="axis-label x-label">ÏãúÍ∞Ñ(Ï¥à)</div>
            `;
            
            // YÏ∂ï ÎààÍ∏àÍ≥º Í≤©ÏûêÏÑ†
            for (let i = 0; i < 3; i++) {
                const tick = document.createElement('div');
                tick.className = 'tick';
                tick.style.left = '-35px';
                tick.style.bottom = `${25 + i * 55}px`;
                tick.textContent = yValues[i];
                graph.appendChild(tick);
                
                const gridLine = document.createElement('div');
                gridLine.style.position = 'absolute';
                gridLine.style.left = '0';
                gridLine.style.bottom = `${25 + i * 55}px`;
                gridLine.style.width = '100%';
                gridLine.style.height = '1px';
                gridLine.style.background = '#ddd';
                graph.appendChild(gridLine);
            }
            
            // XÏ∂ï ÎààÍ∏àÍ≥º Í≤©ÏûêÏÑ†
            for (let i = 0; i <= 9; i++) {
                const tick = document.createElement('div');
                tick.className = 'tick';
                tick.style.bottom = '-18px';
                tick.style.left = `${i * 20}px`;
                tick.textContent = i;
                graph.appendChild(tick);
                
                if (i > 0) {
                    const gridLine = document.createElement('div');
                    gridLine.style.position = 'absolute';
                    gridLine.style.left = `${i * 20}px`;
                    gridLine.style.bottom = '0';
                    gridLine.style.width = '1px';
                    gridLine.style.height = '100%';
                    gridLine.style.background = '#ddd';
                    graph.appendChild(gridLine);
                }
            }
            
            function getYPosition(weight) {
                if (weight === yValues[0]) return 25;
                if (weight === yValues[1]) return 80;
                if (weight === yValues[2]) return 135;
                return 80;
            }
            
            // Í∑∏ÎûòÌîÑ Í∑∏Î¶¨Í∏∞
            const canvas = document.createElement('canvas');
            canvas.width = 180;
            canvas.height = 160;
            canvas.style.position = 'absolute';
            canvas.style.left = '0';
            canvas.style.bottom = '0';
            canvas.style.pointerEvents = 'none';
            
            const ctx = canvas.getContext('2d');
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            for (let segment of graphPattern) {
                const startX = segment.startTime * 20;
                const endX = segment.endTime * 20;
                const y = canvas.height - getYPosition(segment.weight);
                
                ctx.beginPath();
                ctx.moveTo(startX, y);
                ctx.lineTo(endX, y);
                ctx.stroke();
            }
            
            graph.appendChild(canvas);
        }
        
        function getMotionExplanation(segment, actualWeight, difference) {
            const { type, motionDirection, weight } = segment;
            
            if (type === 'stop') {
                return {
                    motion: "Ï†ïÏßÄ",
                    force: "ÌèâÌòï",
                    explanation: `Ï†ïÏßÄ ÏÉÅÌÉú (v = 0, a = 0)
‚Ä¢ Í¥ÄÏÑ±Î†•: 0 (Í∞ÄÏÜçÎèÑÍ∞Ä 0Ïù¥ÎØÄÎ°ú)
‚Ä¢ Ï†ÄÏö∏ Î¨¥Í≤å = Ïã§Ï†ú Î¨¥Í≤å = ${actualWeight}N
‚Ä¢ Ï§ëÎ†•Í≥º ÏàòÏßÅÌï≠Î†•Ïù¥ ÌèâÌòïÏÉÅÌÉú`
                };
            }
            
            const isUp = motionDirection === 'up';
            const isAccel = type === 'acceleration';
            const isDecel = type === 'deceleration';
            const isUniform = type === 'uniform';
            
            let motionText = "";
            let forceText = "";
            let detailExplanation = "";
            
            if (isUniform) {
                motionText = `${isUp ? 'ÏúÑ' : 'ÏïÑÎûò'}Ï™Ω Îì±ÏÜçÏö¥Îèô`;
                forceText = "ÌèâÌòï";
                detailExplanation = `${isUp ? 'ÏúÑ' : 'ÏïÑÎûò'}Ï™Ω Îì±ÏÜçÏö¥Îèô (v ‚â† 0, a = 0)
‚Ä¢ Í¥ÄÏÑ±Î†•: 0 (Í∞ÄÏÜçÎèÑÍ∞Ä 0Ïù¥ÎØÄÎ°ú)
‚Ä¢ Ï†ÄÏö∏ Î¨¥Í≤å = Ïã§Ï†ú Î¨¥Í≤å = ${actualWeight}N
‚Ä¢ Îì±ÏÜçÏö¥Îèô ÏãúÏóêÎäî Ï†ïÏßÄÏôÄ ÎèôÏùºÌïú ÌûòÏùò ÏÉÅÌÉú`;
            } else if (isAccel) {
                motionText = `${isUp ? 'ÏúÑ' : 'ÏïÑÎûò'}Ï™Ω Í∞ÄÏÜç`;
                if (isUp) {
                    forceText = "ÏúÑÏ™Ω Í∞ÄÏÜçÏúºÎ°ú Ïù∏Ìïú Í¥ÄÏÑ±Î†•";
                    detailExplanation = `ÏúÑÏ™Ω Í∞ÄÏÜç (a > 0, ÏúÑÏ™Ω Î∞©Ìñ•)
‚Ä¢ Í¥ÄÏÑ±Î†•: ÏïÑÎûòÏ™ΩÏúºÎ°ú ma ÏûëÏö©
‚Ä¢ Ï†ÄÏö∏Ïù¥ Îçî ÏÑ∏Í≤å ÎàåÎ¶º ‚Üí Î¨¥Í≤å Ï¶ùÍ∞Ä
‚Ä¢ Ï†ÄÏö∏ Î¨¥Í≤å = mg + ma = ${actualWeight + difference}N`;
                } else {
                    forceText = "ÏïÑÎûòÏ™Ω Í∞ÄÏÜçÏúºÎ°ú Ïù∏Ìïú Í¥ÄÏÑ±Î†•";
                    detailExplanation = `ÏïÑÎûòÏ™Ω Í∞ÄÏÜç (a > 0, ÏïÑÎûòÏ™Ω Î∞©Ìñ•)
‚Ä¢ Í¥ÄÏÑ±Î†•: ÏúÑÏ™ΩÏúºÎ°ú ma ÏûëÏö©
‚Ä¢ Ï†ÄÏö∏ÏùÑ Îçú ÎàÑÎ¶Ñ ‚Üí Î¨¥Í≤å Í∞êÏÜå
‚Ä¢ Ï†ÄÏö∏ Î¨¥Í≤å = mg - ma = ${actualWeight - difference}N`;
                }
            } else if (isDecel) {
                if (isUp) {
                    motionText = "ÏúÑÏ™Ω Ïö¥Îèô Ï§ë Í∞êÏÜç";
                    forceText = "ÏúÑÏ™Ω Ïö¥Îèô Í∞êÏÜçÏúºÎ°ú Ïù∏Ìïú Í¥ÄÏÑ±Î†•";
                    detailExplanation = `ÏúÑÏ™Ω Ïö¥Îèô Ï§ë Í∞êÏÜç (v > 0Ïù¥ÏßÄÎßå a < 0)
‚Ä¢ Í∞ÄÏÜçÎèÑÍ∞Ä ÏïÑÎûòÏ™ΩÏù¥ÎØÄÎ°ú Í¥ÄÏÑ±Î†•ÏùÄ ÏúÑÏ™ΩÏúºÎ°ú ÏûëÏö©
‚Ä¢ Ï†ÄÏö∏ÏùÑ Îçú ÎàÑÎ¶Ñ ‚Üí Î¨¥Í≤å Í∞êÏÜå
‚Ä¢ Ï†ÄÏö∏ Î¨¥Í≤å = mg - |ma| = ${actualWeight - difference}N`;
                } else {
                    motionText = "ÏïÑÎûòÏ™Ω Ïö¥Îèô Ï§ë Í∞êÏÜç";
                    forceText = "ÏïÑÎûòÏ™Ω Ïö¥Îèô Í∞êÏÜçÏúºÎ°ú Ïù∏Ìïú Í¥ÄÏÑ±Î†•";
                    detailExplanation = `ÏïÑÎûòÏ™Ω Ïö¥Îèô Ï§ë Í∞êÏÜç (v < 0Ïù¥ÏßÄÎßå a > 0)
‚Ä¢ Í∞ÄÏÜçÎèÑÍ∞Ä ÏúÑÏ™ΩÏù¥ÎØÄÎ°ú Í¥ÄÏÑ±Î†•ÏùÄ ÏïÑÎûòÏ™ΩÏúºÎ°ú ÏûëÏö©
‚Ä¢ Ï†ÄÏö∏Ïù¥ Îçî ÏÑ∏Í≤å ÎàåÎ¶º ‚Üí Î¨¥Í≤å Ï¶ùÍ∞Ä
‚Ä¢ Ï†ÄÏö∏ Î¨¥Í≤å = mg + |ma| = ${actualWeight + difference}N`;
                }
            }
            
            return {
                motion: motionText,
                force: forceText,
                explanation: detailExplanation
            };
        }
        
        function generateQuestion() {
            const { actualWeight, yValues, graphPattern, difference } = currentGraphData;
            
            const motionSegments = graphPattern.filter(s => s.type !== 'stop');
            if (motionSegments.length === 0) {
                generateNewProblem();
                return;
            }
            
            const randomSegment = motionSegments[Math.floor(Math.random() * motionSegments.length)];
            const questionTime = randomSegment.startTime + (randomSegment.endTime - randomSegment.startTime) / 2;
            
            const motionInfo = getMotionExplanation(randomSegment, actualWeight, difference);
            
            const directions = ["Ïó∞ÏßÅ ÏúóÎ∞©Ìñ•", "Ïó∞ÏßÅ ÏïÑÎû´Î∞©Ìñ•"];
            const proposedDirection = directions[Math.floor(Math.random() * directions.length)];
            
            let isCorrect = false;
            if (randomSegment.type === 'uniform' || randomSegment.type === 'acceleration' || randomSegment.type === 'deceleration') {
                isCorrect = (proposedDirection === "Ïó∞ÏßÅ ÏúóÎ∞©Ìñ•" && randomSegment.motionDirection === 'up') ||
                           (proposedDirection === "Ïó∞ÏßÅ ÏïÑÎû´Î∞©Ìñ•" && randomSegment.motionDirection === 'down');
            }
            
            const timeInterval = `${randomSegment.startTime}~${randomSegment.endTime}Ï¥à`;
            
            currentProblem = {
                text: `${questionTime.toFixed(1)}Ï¥àÏùº Îïå ÏóòÎ¶¨Î≤†Ïù¥ÌÑ∞Ïùò Ïö¥ÎèôÎ∞©Ìñ•ÏùÄ ${proposedDirection}Ïù¥Îã§.`,
                correct: isCorrect,
                segment: randomSegment,
                motionInfo: motionInfo,
                timeInterval: timeInterval,
                proposedDirection: proposedDirection,
                questionTime: questionTime
            };
            
            document.getElementById('questionText').textContent = currentProblem.text;
        }
        
        function getAllSegmentsAnalysis() {
            const { actualWeight, yValues, graphPattern, difference } = currentGraphData;
            const { questionTime } = currentProblem;
            
            let analysisText = "üìä Ï†ÑÏ≤¥ Íµ¨Í∞ÑÎ≥Ñ Ïö¥Îèô Î∂ÑÏÑù\n\n";
            
            for (let i = 0; i < graphPattern.length; i++) {
                const segment = graphPattern[i];
                const motionInfo = getMotionExplanation(segment, actualWeight, difference);
                const isQuestionSegment = questionTime >= segment.startTime && questionTime <= segment.endTime;
                
                analysisText += `${isQuestionSegment ? 'üéØ ' : 'üìç '}Íµ¨Í∞Ñ ${i + 1}: ${segment.startTime}~${segment.endTime}Ï¥à ${isQuestionSegment ? '(Î¨∏Ï†ú Íµ¨Í∞Ñ)' : ''}\n`;
                analysisText += `‚Ä¢ Ï†ÄÏö∏ Î¨¥Í≤å: ${segment.weight}N\n`;
                analysisText += `‚Ä¢ Ïö¥Îèô ÏÉÅÌÉú: ${motionInfo.motion}\n`;
                analysisText += `‚Ä¢ ${motionInfo.explanation}\n\n`;
            }
            
            return analysisText;
        }
        
        function checkAnswer(userAnswer) {
            if (answered) return;
            
            answered = true;
            const result = document.getElementById('result');
            const isCorrect = userAnswer === currentProblem.correct;
            const { motionInfo, timeInterval, proposedDirection, segment } = currentProblem;
            const { actualWeight, difference } = currentGraphData;
            
            let correctAnswer = "";
            if (segment.motionDirection === 'up') {
                correctAnswer = "Ïó∞ÏßÅ ÏúóÎ∞©Ìñ•";
            } else if (segment.motionDirection === 'down') {
                correctAnswer = "Ïó∞ÏßÅ ÏïÑÎû´Î∞©Ìñ•";
            } else {
                correctAnswer = "Ï†ïÏßÄ";
            }
            
            const allSegmentsAnalysis = getAllSegmentsAnalysis();
            
            // Î¨∏Ï†úÏùò Ï†ïÎãµÏù¥ OÏù∏ÏßÄ XÏù∏ÏßÄÎ•º ÌëúÏãú (ÏÇ¨Ïö©ÏûêÍ∞Ä ÎßûÏ∑ÑÎäîÏßÄ Ïó¨Î∂ÄÍ∞Ä ÏïÑÎãò)
            const problemAnswer = currentProblem.correct ? 'O' : 'X';
            
            const explanation = `Î¨∏Ï†úÏùò Ï†ïÎãµ: ${problemAnswer}

üéØ Î¨∏Ï†ú Íµ¨Í∞Ñ (${timeInterval}) Î∂ÑÏÑù
Ïã§Ï†ú Ïö¥ÎèôÎ∞©Ìñ•: ${correctAnswer}
Ï†úÏãúÎêú Î∞©Ìñ•: ${proposedDirection}
Í≤∞Î°†: ${isCorrect ? 'ÏùºÏπò' : 'Î∂àÏùºÏπò'}

${allSegmentsAnalysis}üìà Î¨¥Í≤å Î≥ÄÌôîÎ°ú Ïö¥Îèô ÏÉÅÌÉú ÌåêÎã®Î≤ï
‚Ä¢ Î¨¥Í≤å > Ïã§Ï†úÎ¨¥Í≤å ‚Üí ÏúÑÏ™Ω Í∞ÄÏÜç ÎòêÎäî ÏïÑÎûòÏ™Ω Í∞êÏÜç
‚Ä¢ Î¨¥Í≤å < Ïã§Ï†úÎ¨¥Í≤å ‚Üí ÏïÑÎûòÏ™Ω Í∞ÄÏÜç ÎòêÎäî ÏúÑÏ™Ω Í∞êÏÜç  
‚Ä¢ Î¨¥Í≤å = Ïã§Ï†úÎ¨¥Í≤å ‚Üí Ï†ïÏßÄ ÎòêÎäî Îì±ÏÜçÏö¥Îèô`;
            
            result.className = `result ${isCorrect ? 'correct' : 'incorrect'}`;
            result.innerHTML = `
                <strong>${isCorrect ? 'üéâ Ï†ïÎãµÏûÖÎãàÎã§!' : '‚ùå ÌãÄÎ†∏ÏäµÎãàÎã§.'}</strong>
                <div class="explanation">${explanation}</div>
            `;
            result.style.display = 'block';
        }
        
        generateNewProblem();
    </script>
</body>
</html>